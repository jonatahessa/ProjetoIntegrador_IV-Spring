<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        <div th:fragment="menu_topo">
            <!-- TITULO -->
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 menu_topo">
                    <a th:href="@{/}" class="titulo">Loop4`S V1d4 Lok4</a>
                    <a th:href="@{/login}" class="icone_usuario fa fa-user-o"></a>
                    <button type="button" data-toggle="modal" data-target="#myModal" class="icone_carrinho_Topo fa fa-shopping-cart"></button>
                </div>
            </div>
            <!-- MENU TOPO -->
            <div class="row">
                <div sec:authorize="hasRole('ROLE_JOSELITO')" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 menu">
                    <ol class="breadcrumb text-center">
                        <li><a th:href="@{/}">Home</a></li>
                        <li><a th:href="@{sessao/carrinho}">Carrinho</a></li>
                        <li><a th:href="@{/cadastroC}">Cadastro</a></li>
                        <li><a th:href="@{/admin/perfil}">Perfil</a></li>
                    </ol>
                </div>
                <div sec:authorize="!isAuthenticated()" class="col-xs-12 col-sm-12 col-md-12 col-lg-12 menu">
                    <ol class="breadcrumb text-center">
                        <li><a th:href="@{/}">Home</a></li>
                        <li><a th:href="@{sessao/carrinho}">Carrinho</a></li>

                        <li><a th:href="@{/cadastroC}">Cadastro</a></li>
                    </ol>
                </div>

            </div>
            <div class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content modal-lg">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">Carrinho</h4>
                        </div>
                        <div class="modal-body">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <div class="panel-title">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 colMeuCarrinho">
                                                <h1 class="h1MeuCarrinho"><span class="glyphicon glyphicon-shopping-cart"></span> Meu Carrinho </h1>
                                            </div>
                                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                                                <div class="">
                                                    <a th:href="@{/}"><button type="button" class="btn btn-primary btn-sm btn-block btnContinuarComprando">
                                                            <span class="glyphicon glyphicon-share-alt"></span> Continuar Comprando
                                                        </button></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-body">
                                    <div th:if="${vazio} == true">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                                                <h1 class="vazio text-center">Seu carrinho está vazio!</h1>
                                            </div>
                                        </div>
                                    </div>
                                    <div th:if="${vazio} == false">
                                        <div th:each="produto :  ${@sessionController.carrinho}">
                                            <div class="row">
                                                <!-- <div th:each="imagem :  ${@sessionController.imagens}">
                                                     <h1 data-th-text="${imagem.nomeImagem}"></h1>
                                                     <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1 colImg">
                                                         <img class="img-responsive" data-th-src="@{'${imagem.nomeImagem}'}">
                                                     </div>
                                                 </div>-->
                                                <div class="col-xs-12 col-sm-4 col-md-5 col-lg-5 colNomeProduto">
                                                    <h4 data-th-text="${produto.tituloProduto}"><strong></strong></h4>
                                                </div>
                                                <div class="col-xs-12 col-sm-7 col-md-6 col-lg-6">
                                                    <div class="col-xs-4 col-sm-9 col-md-9 col-lg-9 colPreco">
                                                        <h6 data-th-text="${#numbers.formatCurrency(produto.precoProduto)}"><strong> <span class="text-muted">x</span></strong></h6>
                                                        <input type="hidden" data-th-value="${produto.precoProduto}">
                                                    </div>
                                                    <form action="#" th:action="@{/sessao/remover/{id}(id=${produto.codigoProduto})}" method="post">
                                                        <div class="col-xs-7 col-sm-2 col-md-2 col-lg-2 colQnt">
                                                            <input type="text" class="form-control input-sm" name="qnt" th:value="${produto.qntCarrinho}">
                                                        </div>
                                                        <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 ">

                                                            <input type="hidden" name="id" th:value="${produto.codigoProduto}" />
                                                            <button type="submit" class="btn btn-link btn-xs btnRemover">
                                                                <span class="glyphicon glyphicon-remove"> </span>
                                                            </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                        <hr>
                                    </div>

                                    <div class="row linhaCep">
                                        <div class="col-xs-2 col-sm-1 col-md-1 col-lg-1 colFrete">
                                            <h6 class="frete text-center">Frete</h6>
                                        </div>
                                        <div class="col-xs-4 col-sm-3 col-md-2 col-lg-1">
                                            <input type="text" class="form-control input-sm campoCep" onkeypress="mascara(this, '#####-###')" maxlength="9">
                                        </div>
                                        <div class="col-xs-4 col-sm-3 col-md-3 col-lg-1">
                                            <a class="btn btn-small btn-info btnCalcularCep" data-th-href="@{/sessao/frete}"><i class="icon-info-sign"></i>Calcular</a>
                                        </div>
                                        <div class="col-xs-12 col-sm-2 col-md-3 col-lg-4 colTotal">
                                            <p class="total"> Total</p>
                                        </div>
                                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-5 colValor">
                                            <h1 class="h1Total" data-th-text="${#numbers.formatCurrency(total)}"><strong> </strong></h1>
                                        </div>
                                    </div>
                                    <div th:if="${frete} == true">
                                        <div class="row linhaInfoCep">
                                            <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1"></div>
                                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2">
                                                <p class="pFrete">Prazo de entrega: 5-7 dias úteis </br>Valor: R$ 12,00</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <div th:if="${vazio} == false">
                                    <div class="row text-center">
                                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
                                            <a th:href="@{/admin/checkoutEndereco}"><button type="button" class="btn btn-success btn-block btnComprar">Comprar</button></a>               
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Comprar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
